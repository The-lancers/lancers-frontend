<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.1/jquery.validate.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet">
        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    
    <title>Sign up Form</title>
    <link rel="stylesheet" href="../css/signup.css"/>
</head>
   
<body>
    <div class="container">
        <img class="logo-login" src="../images/logo.png" alt="">
        <div class="row">
            <div class=" col-6 offset-4 col-lg-8 offset-lg-2 div-wrapper d-flex justify-content-center align-items-center">
                    <div class="myform form">
                        <div class="col-md-12 text-center">
                            <h1>Sign up</h1>
                        </div>
                        <div class="col-md-12">
                            <div class="signup-form">
                                <p class="text-center">Already have an account? &nbsp<a href="./login.html" id="gotoLogin">Login</a></p>
                            </div>
                        </div> 
                        <!-- signup form -->
                        <form class="registration-form row g-3 needs-validation" id="registerForm" method="POST" action="./signup.html" name="registration" novalidate>
                    
                            <div class="col-md-12">
                                <!-- <label for="full_name" class="registration-form">Full Name</label> -->
                                <input type="text" class="form-control"  name="full_name" id="full_name" required placeholder="full name">
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-12">
                                <!-- <label for="email" class="registration-form">Email</label> -->
                                <input type="email" class="form-control" id="email" name="email" placeholder="email@example.com" required>
                                <div class="invalid-feedback">
                                    Please provide a valid email address.
                                </div>
                            </div>

                            <div class="col-md-12">
                                <!-- <label for="password" class="registration-form">Password</label> -->
                                <input type="password" class="form-control" id="password" name="password" required placeholder="password">
                                <div class="invalid-feedback">
                                    Please generate alphanumeric Password.
                                </div>
                            </div>
                            <div class="col-md-12">
                                <!-- <label for="location">gender:</label> -->
                                <select class="form-select" name="location" id="location">
                                    <option value="">select gender</option>
                                      <option value="Female">Female</option>
                                      <option value="Male">Male</option>
                                  </select>
                                <div class="invalid-feedback">
                                    Please select your gender
                                </div>
                            </div>
                            <div class="col-md-12">
                                <!-- <label for="location">Location:</label> -->
                                <select class="form-select" name="location" id="location">
                                    <option value="">select location</option>
                                      <option value="Kampala">Kampala</option>
                                      <option value="Mbarara">Mbarara</option>
                                      <option value="Mukono">Mukono</option>
                                      <option value="Wakiso">Wakiso</option>
                                  </select>
                                <div class="invalid-feedback">
                                    Please select operation location
                                </div>
                            </div>
                            <!-- <div class="col-md-12 gender">
                                <label for="location">Select gender:</label>
                                <input class="form-check-input" type="radio" id="male" name="gender" value="male" checked>
                                <label for="male">Male</label>
                                <input class="form-check-input" type="radio" id="female" name="gender" value="female">
                                <label for="female">Female</label>
                                <div class="invalid-feedback">
                                    Please select operation location
                                </div>
                            </div> -->

                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                    <label class="form-check-label" for="invalidCheck">
                                        Agree to terms and conditions
                                    </label>
                                    <div class="invalid-feedback">
                                        You must agree before submitting.
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12 text-center">
                                <button onclick="myFunction()" class="btn btn-block mybtn btn-success-override tx-tfm" type="submit">Sign up</button>
                            </div>
                            <!-- <div class="col-md-12">
                                <div class="registration-form">
                                    <p class="text-center"><a href="../pages/login.html" id="signin">Already have an account?</a></p>
                                </div>
                            </div> -->
                        </form>
                    </div>  
                </div>  
            </div>
        </div> 
    </div>
    <!-- <script>
        function myFunction() {
          document.getElementById("demo").innerHTML = "Account created successfully";
        }
        </script> -->
        <script src="../js/registration.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    <!-- <script src="../js/registration.js"></script> -->


    <script>
        var myForm = new bootstrap.form(document.getElementById('registerForm'), {
          keyboard: false
        })
        const registerBtn = document.querySelector('#registerBtn');
        const registerForm = document.querySelector('#registerForm');
        // const reviewsHolder = document.querySelector('.reviews-section');
        const loader = document.querySelector('#loader');
        const backendUrl = 'https://japotech.herokuapp.com/';
        const authLocal = 'http://localhost:5050/auth/'
  
        registerForm.addEventListener('submit', e => {
          e.preventDefault();
          console.log(e);
          // myModal.hide()
          let fullName = e.target.full_name.value;
          let email = e.target.email.value;
          let password = e.target.password.value;
          let gender = e.target.gender.value;
          let location = e.target.location.value;
          console.log(fullName, email, password, gender, location);
  
          // perform a request to save data
          if(fullName &&  email &&  password && gender && location) {
            console.log('saving data...')
            loader.textContent = 'Saving......'
            // use fetch api to save data on the server
            fetch(`${backendUrl}/add`, {
              headers: {
                'Content-Type':'application/json'
              },
              body: JSON.stringify({fullName, email, password, gender, location}),
              method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
              console.log(data)
              
              window.location.reload()
              loader.textContent = '';
  
            })
            .catch(error => console.error(error.toString()));
          }
      
        })
  
  
      function deleteRegister(id) {
        let s = id
        let deleteUrl = `${backendUrl}/${s}/delete`
        console.log(deleteUrl)
        fetch(deleteUrl, {
          method:'DELETE',
        })
               .then(response => response.json())
               .then(data => {
                 window.location.reload()
               })
               .catch(error => console.error(error));
      }
  
    //   function createCard(review) {
    //   let {fullName, message, _id} = review;
    //   const reviewCard = document.createElement('div');
    //      reviewCard.classList= 'card mb-2';
    //      reviewCard.setAttribute('id', _id)
  
    //      // h4 for reviewer name
    //      const cardHeader = document.createElement('div');
    //      cardHeader.className = 'card-header';
  
    //      // div holding the card details
    //      const cardContent = document.createElement('div');
    //      cardContent.className = 'card-body';
  
    //      //paragraph holding the review text
    //      const cardText = document.createElement('p');
    //      cardText.className = 'text-responsive';
  
    //      cardHeader.textContent = fullName;
    //      reviewCard.appendChild(cardHeader); // adds reviewer name to the DOM
         
    //      // add review
    //      cardText.textContent = message;
    //      cardContent.appendChild(cardText);
  
    //      // now add reviews to the page
    //      reviewCard.appendChild(cardContent);
  
    //      reviewCard.addEventListener('dblclick', (e) => {
    //        let reviewElement = e.target.parentElement;
    //        let _id = reviewElement.getAttribute('id')
    //        if(confirm('Are you sure you want to delete the review?')) {
    //          deleteReview(_id) 
    //         // console.log(_id)
    //        }
    //        return;
    //      })
    //      reviewsHolder.appendChild(reviewCard);
  
  
        
      </script>
     


</body>
</html>